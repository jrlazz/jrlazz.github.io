<!DOCTYPE html>
<html lang="en">
<head>
<title>wandering.html</title>
<meta charset="utf-8">
<link rel="icon" type="image/png" href="img/github-mark.png">
<meta name="description" content="Wandering">
<meta name="twitter:image" content="img/ag_baboy_right.png" />
<meta name="twitter:image:type" content="png" />
<meta name="twitter:image:width" content="19" />
<meta name="twitter:image:height" content="47" />
<style>
@font-face {font-family:lucida;src:url(lucida_console.ttf);}
span{position:absolute;font-family:lucida;font-size:9pt;width:40px;font-style:italic;text-align:center;z-index:1;}
img:hover{cursor:pointer;}
body {margin:0px;background-color:#001144;overflow:hidden;font-family:lucida;}
td{font-family:lucida;font-size:9pt;color:#001122;font-style:italic;text-align:center;}
.blu{filter: invert(41%) sepia(86%) saturate(2434%) hue-rotate(195deg) brightness(104%) contrast(101%);}
</style>

</head>

<body>

<script type="module">

import * as THREE from '../js/three.module_res_res.js';
import { OrbitControls } from '../js/OrbitControls_res_res.js';

var renderer,scene,camera,geometry,material,controls;
var altera=0;
var group=new THREE.Group();
var groupB=new THREE.Group();
var barra=new Array();
var color;
var sub;
var dis=15;
var theta=0;
var phi=0;
var ang=360;
var num=91;
var k=0;
var w=0;
var ww=0;
var ballMesh;
var heart;

var arT=new Array();
var arP=new Array();
arT[1]=129;arP[1]=-169;arT[2]=132;arP[2]=-105;arT[3]=143;arP[3]=-48;arT[4]=161;arP[4]=-144;arT[5]=-45;arP[5]=-102;arT[6]=121;arP[6]=106;arT[7]=-43;arP[7]=145;arT[8]=-86;arP[8]=62;arT[9]=-43;arP[9]=147;arT[10]=-34;arP[10]=-152;
arT[11]=-86;arP[11]=22;arT[12]=-110;arP[12]=25;arT[13]=123;arP[13]=-10;arT[14]=-2;arP[14]=-148;arT[15]=-116;arP[15]=-50;arT[16]=-79;arP[16]=-107;arT[17]=-108;arP[17]=122;arT[18]=2;arP[18]=-135;arT[19]=-14;arP[19]=-114;arT[20]=-175;arP[20]=123;
arT[21]=89;arP[21]=-26;arT[22]=-80;arP[22]=63;arT[23]=-150;arP[23]=102;arT[24]=-14;arP[24]=167;arT[25]=164;arP[25]=29;arT[26]=73;arP[26]=85;arT[27]=-61;arP[27]=166;arT[28]=-83;arP[28]=24;arT[29]=-77;arP[29]=-1;arT[30]=-38;arP[30]=5;
arT[31]=133;arP[31]=-61;arT[32]=156;arP[32]=19;arT[33]=87;arP[33]=28;arT[34]=-141;arP[34]=18;arT[35]=177;arP[35]=-176;arT[36]=-83;arP[36]=55;arT[37]=175;arP[37]=-88;arT[38]=-108;arP[38]=107;arT[39]=-79;arP[39]=170;arT[40]=-37;arP[40]=158;
arT[41]=-118;arP[41]=168;arT[42]=51;arP[42]=67;arT[43]=7;arP[43]=3;arT[44]=-44;arP[44]=97;arT[45]=173;arP[45]=-144;arT[46]=24;arP[46]=100;arT[47]=-147;arP[47]=75;arT[48]=72;arP[48]=-129;arT[49]=-25;arP[49]=-151;arT[50]=-57;arP[50]=-73;
arT[51]=-161;arP[51]=135;arT[52]=81;arP[52]=-13;arT[53]=33;arP[53]=-45;arT[54]=99;arP[54]=34;arT[55]=-162;arP[55]=134;arT[56]=141;arP[56]=99;arT[57]=166;arP[57]=-31;arT[58]=38;arP[58]=14;arT[59]=-106;arP[59]=-117;arT[60]=82;arP[60]=-106;
arT[61]=-143;arP[61]=60;arT[62]=-38;arP[62]=-3;arT[63]=-173;arP[63]=144;arT[64]=82;arP[64]=34;arT[65]=28;arP[65]=-34;arT[66]=-131;arP[66]=-164;arT[67]=147;arP[67]=-45;arT[68]=174;arP[68]=-5;arT[69]=55;arP[69]=133;arT[70]=31;arP[70]=-79;
arT[71]=-153;arP[71]=73;arT[72]=64;arP[72]=-32;arT[73]=133;arP[73]=-57;arT[74]=63;arP[74]=-32;arT[75]=74;arP[75]=-173;arT[76]=86;arP[76]=-160;arT[77]=-144;arP[77]=-121;arT[78]=106;arP[78]=-14;arT[79]=109;arP[79]=-9;arT[80]=-64;arP[80]=33;
arT[81]=-135;arP[81]=-70;arT[82]=-138;arP[82]=-157;arT[83]=134;arP[83]=118;arT[84]=131;arP[84]=-100;arT[85]=-48;arP[85]=-148;arT[86]=-57;arP[86]=-110;arT[87]=20;arP[87]=167;arT[88]=36;arP[88]=176;arT[89]=25;arP[89]=-102;arT[90]=-104;arP[90]=-13;

var str="";

function init(){

	renderer=new THREE.WebGLRenderer();
	renderer.setPixelRatio(window.devicePixelRatio);
	renderer.setSize(window.innerWidth,window.innerHeight);
	document.body.appendChild(renderer.domElement);
	renderer.shadowMap.enabled=true;
	renderer.setClearColor(0x001144);

	scene=new THREE.Scene();

	camera=new THREE.PerspectiveCamera(85,window.innerWidth/window.innerHeight,1,1000);
	camera.position.set(0,0,25);

	var sun=new THREE.PointLight("#c96",5);
	sun.position.set(0,0,40);
	sun.shadow.mapSize.width=1024;
	sun.shadow.mapSize.height=1024;
	sun.castShadow=true;
	scene.add(sun);

	controls=new OrbitControls(camera,renderer.domElement);
	controls.minDistance=15;
	controls.maxDistance=40;
	controls.enablePan=true;
	controls.enableDamping=true;

	const textureLoader=new THREE.TextureLoader();

	function get_random_color(){
		color="";
		for(let i=0;i<3;i++){
        		sub=Math.floor(Math.random()*256).toString(16);
        		color +=(sub.length==1?"0"+sub:sub);
    		}
    	return "#"+color;
	}

	// ballMat
	const ballMat=new THREE.MeshStandardMaterial({
		color:"#000",
		roughness:0.8,
		transparent:false,
		metalness:0.75
	});

	textureLoader.load("../img/earth_wandering.jpg",function(map){
		map.anisotropy=4;
		//map.encoding=THREE.sRGBEncoding;
		ballMat.map=map;
		ballMat.needsUpdate=true;
	});

	// Terra
	const ballGeometry=new THREE.SphereBufferGeometry(12,32,32);
	ballMesh=new THREE.Mesh(ballGeometry,ballMat);
	ballMesh.receiveShadow=true;
	ballMesh.position.set(0,0,0);
	ballMesh.scale.set(0.5,0.5,0.5);
	ballMesh.rotation.set(0,0.85,0);
	//scene.add(ballMesh);
	// Luas
	const ballGeo=new THREE.SphereBufferGeometry(0.5,32,32);
	for(let j=1;j<num;j++){
		material=new THREE.MeshStandardMaterial({color:"#fff", roughness:0.8, transparent:false, metalness:0.75});
		barra[j]=new THREE.Mesh(ballGeo,material);
		theta=parseInt(THREE.Math.randFloatSpread(ang));
		phi=parseInt(THREE.Math.randFloatSpread(ang));
		k=THREE.Math.randFloatSpread(dis/10);
		barra[j].material.color.set(get_random_color());
		//barra[j].position.set(dis*Math.sin(theta)*Math.cos(phi),dis*Math.sin(theta)*Math.sin(phi),dis*Math.cos(theta));
		barra[j].position.set(dis*Math.sin(arT[j])*Math.cos(arP[j]),dis*Math.sin(arT[j])*Math.sin(arP[j]),dis*Math.cos(arT[j]));
		barra[j].scale.set(0.5,0.5,0.5);
		barra[j].scale.set(k,k,k);
		barra[j].castShadow=true;
		//str=str+"arT["+j+"]="+theta+";arP["+j+"]="+phi+";";
    	}
	//alert(str);

dis=40;
	for(let j=num;j<num+200;j++){
		material=new THREE.MeshStandardMaterial({color:"#ffc", roughness:0.8, transparent:false, metalness:0.75});
		barra[j]=new THREE.Mesh(ballGeo,material);
		theta=THREE.Math.randFloatSpread(ang);
		phi=THREE.Math.randFloatSpread(-ang);
		barra[j].position.set(dis*Math.sin(theta)*Math.cos(phi),dis*Math.sin(theta)*Math.sin(phi),dis*Math.cos(theta));
		barra[j].scale.set(0.1,0.1,0.1);
		scene.add(barra[j]);
    	}

	const heartGeo=new THREE.SphereBufferGeometry(0.25,32,32);
	material=new THREE.MeshLambertMaterial({color:"#f00",emissive:"#f00",emissiveIntensity:1});
	heart=new THREE.Mesh(heartGeo,material);
	heart.material.emissiveIntensity=0.1;
	heart.position.set(5.45,-2.4,0);
	heart.scale.set(0.5,0.5,0.5);


	// RENDER
	render();
	window.addEventListener('resize',onResize,false);
}

function onResize() {
	camera.aspect=window.innerWidth/window.innerHeight;
	camera.updateProjectionMatrix();
	renderer.setSize(window.innerWidth,window.innerHeight);
	document.getElementById("spanB").style.left=window.innerWidth-80+"px";
}
function animate() {
	requestAnimationFrame(animate);
	controls.update();
	render();
}

function render() {
	renderer.render(scene,camera);

	if(altera==0){alterando();}

	group.rotation.x  -=0.001;
	group.rotation.y  -=0.001;
	group.rotation.z  +=0.001;

	groupB.rotation.y +=0.01;

	w +=0.025;
	if(w>1){w=0;}
	heart.scale.set(w,w,w);

	ww++;
	if(ww<255){ballMesh.material.color.set('rgb('+ww+','+ww+','+ww+')');}
}

function alterando(){

const myTimeout=setTimeout(segue, 400);

function segue(){
	for(let j=1;j<num;j++){group.add(barra[j]);}
	scene.add(group);
	group.rotation.set(.2,0,1.57);
//	ballMesh.material.color.set("#fff");
	groupB.add(ballMesh);
	groupB.add(heart);
	scene.add(groupB);
}
	altera++;
	animate();
}

init();

</script>

<table style="position:absolute;left:33%;width:33%;top:0px;z-index:1;"><tr>
<td><img onmouseover="info();" onmouseout="infoout();" src="../img/inf.png" class="blu" style="width:16px;;"></img></td>
<td><div onmouseover="info();" onmouseout="infoout();" id="waveform" style="position:relative;left:0px;top:-130px;width:300px;height:40px;"></div></td>
</tr>
</table>

<table id="info" style="position:absolute;left:33%;width:33%;top:180px;z-index:1;background-color:#006699;display:none;border:1px outset #ff0;">
<tr><td>
<br>
... wandering<br>
I did Wandering in the 60&#39;s (I was 17),<br>
coded it in AdLib Visual Composer in the 80&#39;s,<br>
mp3ed it in Audacity,<br>
adjusted it in GoldWave.<br>
presented here in 2022.<br>
I Use Anim8or from R. Steven Glanville to create objects,<br>
and run Three.js with QuickPHP.<br><br>
Jos&eacute; Roberto Lazzareschi, a 3Dreamer...
<br>
<br>
</td></tr></table>

<script>

function info(){document.getElementById("info").style.display="";}
function infoout(){document.getElementById("info").style.display="none";}

document.getElementById("spanB").style.left=window.innerWidth-80+"px";

</script>

</body>
</html>
