<!DOCTYPE html>
<html lang="en">
<head>
<title>fatlines_1.html</title>
<meta charset="utf-8">
<link rel="shortcut icon" href="https://threejs.org/files/favicon.ico"/>

<style>
span{position:absolute;font-family:Monospace;font-size:9pt;color:#ff0;z-index:2;}
body{margin:0px;background-color:#001144;overflow:hidden;}
input{width:45px;font-size:16pt;font-family:Monospace;background-color:#001144;color:#0ff;border:none;}
</style>

</head>

<body>
<span id="spanA" style="left:10px;top:5px;">right click &rarr; inspect &rarr; source code</span>
<span style="left:10px;top:55px;font-size:16pt;color:#0ff;">line width <input id="inp" type="number" autocomplete="off" min=1 max=40 value=4></input></span>
<span style="left:10px;top:85px;font-size:16pt;color:#0ff;">curved <input id="chk" type="checkbox" checked value="" autocomplete="off"></input></span>

<script type="module">

import * as THREE from '../js/three.module_res_res.js';
import { OrbitControls } from '../js/OrbitControls_res_res.js';
import { Line2 } from '../js/Line2_res_res.js';
import { LineMaterial } from '../js/LineMaterial_res_res.js';
import { LineGeometry } from '../js/LineGeometry_res_res.js';

var renderer, scene, camera, controls, line, matLine, divs, color, spline, t, lineGeometry;
var point=new THREE.Vector3();
var pp=[];
var positions=[];
var colors=[];
var points=[];
var BI, CH;
var curvefactor=9;
var w=0;

function init(){

	BI=document.getElementById('inp');BI.onchange=function StartAnimation(){ex1();}
	CH=document.getElementById('chk');CH.onchange=function StartAnimation(){ex2();}

	renderer = new THREE.WebGLRenderer({antialias:true,alpha:true});
	renderer.setPixelRatio( window.devicePixelRatio );
	renderer.setClearColor(0x000000,0);
	renderer.setSize(window.innerWidth,window.innerHeight);
	document.body.appendChild(renderer.domElement);

	scene=new THREE.Scene();

	camera=new THREE.PerspectiveCamera(40, window.innerWidth/window.innerHeight,1,1000);
	camera.position.set(0,0,30);

	controls=new OrbitControls(camera,renderer.domElement);
	controls.minDistance=10;
	controls.maxDistance=100;
	controls.enablePan=true;
	controls.enableZoom=true;
	controls.enableRotate=true;
	controls.enableDamping=true;

	pp[0]=new THREE.Vector2(0,0);
		pp[1]=new THREE.Vector2(0,5);
	pp[2]=new THREE.Vector2(5,5);
		pp[3]=new THREE.Vector2(5,0);
	pp[4]=new THREE.Vector2(0,0);
		pp[5]=new THREE.Vector2(0,0);
	pp[6]=new THREE.Vector2(0,0);
		pp[7]=new THREE.Vector2(0,-2.5);
	pp[8]=new THREE.Vector2(-2.5,-2.5);
		pp[9]=new THREE.Vector2(-2.5,0);
	pp[10]=new THREE.Vector2(0,0);

	spline=new THREE.SplineCurve(pp);

	divs=curvefactor*(pp.length-1);
	point=new THREE.Vector3();
	color=new THREE.Color();

	for(let i=0;i<divs;i++){
		t=i/divs;
		spline.getPoint(t,point);
		positions.push(point.x,point.y,point.z);
		color.setHSL(t,1.0,0.5);
		colors.push(color.r,color.g,color.b);
	}

	matLine=new LineMaterial({color:0xffffff,linewidth:4,vertexColors:true});

	lineGeometry=new LineGeometry();
	lineGeometry.setPositions(positions);
	lineGeometry.setColors(colors);

	line=new Line2(lineGeometry,matLine);
	line.computeLineDistances();
	line.scale.set(1,1,1);
	scene.add(line);

	window.addEventListener('resize',onWindowResize);
	onWindowResize();

}

function ex1(){
	matLine.linewidth=document.getElementById("inp").value; 
}
function ex2(){
	if(document.getElementById("chk").checked==true){
		window.location.href="fatlines_1c.html";
	}else{
		window.location.href="fatlines_1.html";
	}
}

function onWindowResize(){
	camera.aspect=window.innerWidth/window.innerHeight;
	camera.updateProjectionMatrix();
	renderer.setSize(window.innerWidth,window.innerHeight);
}

function animate(){
	requestAnimationFrame(animate);
	renderer.render(scene,camera);
	controls.update();
	w++;
	if(w==3){matLine.resolution.set(window.innerWidth,window.innerHeight);}
}
init();
animate();

/*

Hi Three.js followers,

Trying to simplify fat lines code

It is my first experience to obtain straights lines with larger widths.


the link:

http://jrlazz.eu5.org/ggk/fatlines_1.html

Again, Thanks for the great Three.js Team!

Jose Roberto Lazzareschi


*/

</script>
</body>
</html>
