<!doctype html>
<html lang="en">

<head>
<meta charset="utf-8">

<title>oscilo_01</title>
<style>
body { font-family: Arial; font-size:10pt;}
button { font-family: Arial; font-size:12pt;}
input { font-family: Arial; font-size:14pt;}
</style>
</head>


<body style="background-color:#bececa;">

<!-- main wavesurfer.js lib -->
<!-- accept="sound/*" -->

<input type="file" id="fileinput" />
<button onclick="wavesurfer.skipBackward()">Backward</button>
<button onclick="wavesurfer.playPause()">Play / Pause</button>
<button onclick="wavesurfer.skipForward()">Forward</button>
<button onclick="wavesurfer.toggleMute()">Toggle Mute</button>
<button id="butslider">&nbsp;</button>
    <div class="col-xs-10">
      <input id="slider" type="range" min="1" max="50" value="1" style="width:100%" />
    </div>

<div id="waveform" style="width:100%;"></div>


<script src="../js/wavesurfer.min.js"></script>

<script>


    // Once the user loads a file in the fileinput, the file should be loaded into waveform
    document.getElementById("fileinput").addEventListener('change', function(e){
        var file = this.files[0];

        if (file) {
            var reader = new FileReader();
            
            reader.onload = function (evt) {
                // Create a Blob providing as first argument a typed array with the file buffer
                var blob = new window.Blob([new Uint8Array(evt.target.result)]);

                // Load the blob into Wavesurfer
                wavesurfer.loadBlob(blob);
            };

            reader.onerror = function (evt) {
                console.error("An error ocurred reading the file: ", evt);
            };

            // Read File as an ArrayBuffer
            reader.readAsArrayBuffer(file);
        }
    }, false);

var wavesurfer = WaveSurfer.create({
//wavesurfer.loadDecodedBuffer(8000),
  container: '#waveform',
  waveColor: 'green',
  progressColor: 'blue',
  splitChannels: true,
  height: 164,
//      barWidth: 1.0
      barWidth: .5
});

var slider = document.querySelector('#slider');
slider.oninput = function () {
	var zoomLevel = Number(slider.value);
	wavesurfer.zoom(zoomLevel);
document.getElementById("butslider").innerText=zoomLevel;
//alert(zoomLevel);
};


</script>

<center>
Volume <input id="inpa" onchange="vol();" type="range" min="0" max="1" value="0.2" step="0.01" style="width: 50%">
</center>

<script>
wavesurfer.setVolume(.2);
document.getElementById("inpa").value=.2;
function vol(){
	wavesurfer.setVolume(document.getElementById("inpa").value);
}

</script>

</body>

</html>
