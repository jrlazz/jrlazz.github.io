<!DOCTYPE html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=.52" />
<title>clock_b</title>
<style>
body,span { background-color:#8a8; overflow:; font-family:monospace; font-size:40px; font-weight:bold;}
svg { position:absolute; width:100%; height:100%; top:-50px; z-index:-1; font-family:monospace; font-size:45px;}
button { font-family:monospace; font-size:60px; font-weight:bold; border:5px outset;}
input { background-color:#8a8; font-family:monospace; font-size:80px; font-weight:bold; width:200px; border:0px; color:#ff0;}
table { position:absolute; top:570px;width:100%;}
audio { position:absolute; top:100px; left:800px;}

</style>
</head>

<body>
<audio id="aud">
	<source src="bubbles.mp3" type="audio/mpeg"/>
</audio>
<svg>
<filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
	<feGaussianBlur in="SourceGraphic" stdDeviation="8" result="blur"/>
	<feOffset in="blur" dx="1" dy="1"/>
</filter>
<circle onclick="retime();" style="stroke:#363;stroke-width:12px;fill:#060" cx="300" cy="300" r="220" filter="url(#shadow)"></circle>
<circle onclick="retime();" style="stroke:#dfd;stroke-width:12px;fill:#8b8" cx="300" cy="300" r="198"></circle>
<text onclick="retime();" id="horamin" x="300" y="590" stroke="#060" font-weight="700" text-anchor="middle">SVG</text>
<g stroke="#060" font-size="30" font-weight="700" text-anchor="middle">
	<text x="460" y="311">15</text>
	<text x="297" y="475">30</text>
	<text x="140" y="306">45</text>
</g>
<g id="gmin">
	<line x1="100" x2="100" y1="20" y2="100" stroke-width="6" stroke="#060" stroke-linecap="round"></line>
	<line x1="100" x2="100" y1="20" y2="100" stroke-width="1" stroke="#cfc" stroke-linecap="round"></line>
</g>
<g id="ghou"><line x1="100" x2="100" y1="35" y2="100" stroke-width="7" stroke="#030" stroke-linecap="round"></line></g>
<circle cx="300" cy="300" r="10" fill="#060" stroke-width="2" stroke="#9f9"/>
</svg>
<table><tr><td>
<center>
<input name="pu" id="pu" type="text" value=""></input>
<br><br>
<button onclick="fbu(1);" id="bu">&nbsp;1&nbsp;</button>&nbsp;&nbsp;
<button onclick="fbu(2);" id="bu">&nbsp;2&nbsp;</button>&nbsp;&nbsp;
<button onclick="fbu(3);" id="bu">&nbsp;3&nbsp;</button>&nbsp;&nbsp;
<br><br>
<button onclick="fbu(4);" id="bu">&nbsp;4&nbsp;</button>&nbsp;&nbsp;
<button onclick="fbu(5);" id="bu">&nbsp;5&nbsp;</button>&nbsp;&nbsp;
<button onclick="fbu(6);" id="bu">&nbsp;6&nbsp;</button>&nbsp;&nbsp;
<br><br>
<button onclick="fbu(7);" id="bu">&nbsp;7&nbsp;</button>&nbsp;&nbsp;
<button onclick="fbu(8);" id="bu">&nbsp;8&nbsp;</button>&nbsp;&nbsp;
<button onclick="fbu(9);" id="bu">&nbsp;9&nbsp;</button>&nbsp;&nbsp;
<br><br>
<button onclick="fbu(0);" id="bu">&nbsp;0&nbsp;</button>
<br><br>
<button style="color:#009" onclick="ent();">&nbsp;VAI&nbsp;</button>&nbsp;&nbsp;
<button style="color:#900" onclick="apaga();">&nbsp;SAI&nbsp;</button>
<br><br>
<button style="color:#090" onclick="limpa();">&nbsp;LIMPA&nbsp;</button>
<br><br>
<span id="sp1"></span> e <span id="sp2"></span>
</center>
</td></tr></table>

<script>

var d,n,m,sec,hora,graus,partedehora,horgraus,minuto,decimin,delta,strm,i,omes,campopu,alarme,maior,zero;

var svgText=document.getElementById("horamin");
var textNode=svgText.childNodes[0];

delta=28;

for (i=0;i<=60;i++){
	var el=document.createElementNS('http://www.w3.org/2000/svg','circle');
	el.setAttribute('cx',160);
	el.setAttribute('cy',160);
	el.setAttribute('r','2');if(i==3||i==8||i==13||i==18||i==23||i==28||i==33||i==38||i==43||i==48||i==53||i==58){el.setAttribute('r','4');}
	el.setAttribute('transform','rotate('+delta+' 300 300)');
	el.setAttribute('style','fill:#090;');if(i==3||i==8||i==13||i==18||i==23||i==28||i==33||i==38||i==43||i==48||i==53||i==58){el.setAttribute('style','fill:#060;');}
	document.querySelector('svg').appendChild(el);
	delta=delta+6;
}

function retime(){
	d=new Date(); n=parseInt(d.getHours()); m=parseInt(d.getMinutes()); sec=parseInt(d.getSeconds());
	hora=360/12;graus=(n-12)*hora; partedehora=m/60;
	horgraus=parseInt(graus+(partedehora*hora));
	document.getElementById("ghou").setAttribute("transform","translate(100,100) scale(2,2) rotate("+horgraus+",100,100)");
	minuto=360/60; decimin=parseInt((sec/60)*10)/10;
	mingraus=parseInt((m+decimin)*minuto);
	document.getElementById("gmin").setAttribute("transform","translate(100,100) scale(2,2) rotate("+mingraus+",100,100)");
	zero="";if(10>m){zero="0";}
	if(10>sec){sec="0"+sec;}
	omes=parseInt((d.getMonth()+1));if(omes<11){omes="0"+omes;}
	textNode.nodeValue=d.getDate()+"/"+omes+"/"+d.getFullYear()+" "+n+":"+zero+m+":"+sec;
	maior=n*60+m;
	if(maior>=alarme){
		document.body.style.backgroundColor="#060";
		clearInterval(myvar);
		myvar=setInterval(atutime,60000);
		aud.play();
	}
	document.getElementById("sp2").innerText=n*60+m;
}

//var list = document.getElementsByTagName("UL")[0];
//list.getElementsByTagName("LI")[0].innerHTML = "Milk";

var myvar=setInterval(atutime,15000);

function atutime(){retime();}

retime();

function fbu(f){
	campopu=document.getElementById("pu").value;
	document.getElementById("pu").value=campopu+f.toString();
}

function ent(){
	clearInterval(myvar);
	myvar=setInterval(atutime,15000);
	document.body.style.backgroundColor="#8a8";
	campopu=document.getElementById("pu").value;
//	if(campopu.length<4){campopu="0"+campopu;}
	if(campopu.length==3){campopu="0"+campopu;}
	if(campopu.length==2){campopu="00"+campopu;}
	if(campopu.length==1){campopu="000"+campopu;}
	document.getElementById("pu").value=campopu;
	//document.getElementById("sp1").innerText=campopu.substring(0,2) + campopu.substring(2,4);
if(parseInt(campopu.substring(2,4))>59){campopu=campopu.substring(0,2)+"59";document.getElementById("pu").value=campopu;}
	document.getElementById("sp1").innerText=parseInt(campopu.substring(0,2))*60 + parseInt(campopu.substring(2,4));
	alarme=parseInt(campopu.substring(0,2))*60 + parseInt(campopu.substring(2,4));
	document.getElementById("sp2").innerText=maior;
}

function apaga(){
	document.getElementById("pu").value="";
}

function limpa(){
	apaga();
	window.location.reload(); 
}

apaga();

</script>

</body>
</html>