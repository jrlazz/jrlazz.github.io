<!DOCTYPE html>
<html lang="en">
<head>
<title>roof10.html</title>
<meta charset="utf-8">

<link rel="icon" type="image/png" href="../img/github-mark.png">
<meta name="description" content="Roof10">
<meta name="twitter:image" content="img/ag_baboy_right.png" />
<meta name="twitter:image:type" content="png" />
<meta name="twitter:image:width" content="19" />
<meta name="twitter:image:height" content="47" />

<style>
body{overflow:hidden;margin:0px;background-color:#048;font-family:Monospace;}
span{position:absolute;font-size:20.5pt;font-family:Monospace;}
a{font-size:14pt;font-family:Monospace;}
</style>

<script type="importmap">
	{
		"imports":{
	"three":"https://unpkg.com/three@0.181.0/build/three.module.js",
	"three/addons/":"https://unpkg.com/three@0.181.0/examples/jsm/"
		}
	}
</script>

</head>

<body>
<span style="width:90%;top:8%;text-align:center;font-size:12pt;color:#ff0;">four blocks ... some different shapes (not so perfect angles)</span>
<span style="left:75%;top:5%;color:#ff0;text-align:center;"><i style="color:#0ff;">Christmas</i> <i style="color:#0f0;">Roofs</i><br>Roof10<br><br>
<button style="height:30px;background-color:#fc0;text-align:center;border:3px outset white;"><a id="code" href="roof10.txt" target="_blank" style="color:#024;text-decoration:none;">The Code</a></button>
</span>

<script type="module">

import * as THREE from 'three';
import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

var renderer, scene, camera, controls, tex, tex2, shape, shape2;

var iW=window.innerWidth;
var iH=window.innerHeight;

var geo=[], luz=[], mat=[], tex=[], mesh=[];
var axe=[];for(let z=1;z<10;z++){axe[z]=new THREE.AxesHelper(0.1);}
var gro=[];for(let z=1;z<10;z++){gro[z]=new THREE.Group();}

var bolageo=[];
var bolamesh=[];
var bolamat=[];

var p=Math.PI;

function init(){
	camera=new THREE.PerspectiveCamera(70,iW/iH,1,1000,1);
	camera.position.set(-20,20,80);
	scene=new THREE.Scene();
	scene.position.set(0,10,0);
	renderer=new THREE.WebGLRenderer({antialias:true,alpha:true});
	renderer.setPixelRatio(window.devicePixelRatio);
	renderer.setSize(iW,iH);
	renderer.colorSpace=THREE.SRGBColorSpace;

	document.body.appendChild(renderer.domElement);

	window.addEventListener("resize",(event)=> {
		camera.aspect=innerWidth/innerHeight;
		camera.updateProjectionMatrix();
		renderer.setSize(innerWidth,innerHeight);
	});

	controls=new OrbitControls(camera,renderer.domElement);

	luz[1]=new THREE.AmbientLight("#fff",1.5);scene.add(luz[1]);

tex[1]=new THREE.TextureLoader().load('img/blocos/256lis.png');
tex[1].wrapS=THREE.RepeatWrapping;tex[1].wrapT=THREE.RepeatWrapping;
tex[1].repeat.set(1,1);
tex[1].colorSpace=THREE.SRGBColorSpace;

tex[2]=new THREE.TextureLoader().load('img/blocos/256lis.png');
tex[2].wrapS=THREE.RepeatWrapping;tex[2].wrapT=THREE.RepeatWrapping;
tex[2].repeat.set(1,4);
tex[2].rotation=-p/2;
tex[2].colorSpace=THREE.SRGBColorSpace;

tex[3]=new THREE.TextureLoader().load('images/a_grass.jpg');
tex[3].wrapS=THREE.RepeatWrapping;tex[3].wrapT=THREE.RepeatWrapping;
tex[3].repeat.set(6,6);
tex[3].colorSpace=THREE.SRGBColorSpace;

tex[4]=new THREE.TextureLoader().load('img/blocos/256lis.png');
tex[4].wrapS=THREE.RepeatWrapping;tex[4].wrapT=THREE.RepeatWrapping;
tex[4].repeat.set(1,1);
tex[4].rotation=p/4;
tex[4].colorSpace=THREE.SRGBColorSpace;

mat[1]=new THREE.MeshStandardMaterial({color:'#f60',side:THREE.DoubleSide});
mat[2]=new THREE.MeshStandardMaterial({color:'#d30',side:THREE.DoubleSide});
mat[3]=new THREE.MeshStandardMaterial({color:'#fff',map:tex[1]});
mat[4]=new THREE.MeshStandardMaterial({color:'#fff',map:tex[2]});
mat[5]=new THREE.MeshStandardMaterial({color:'#fff',map:tex[3]});
mat[6]=new THREE.MeshStandardMaterial({color:'#fff',map:tex[4]});

bolamat[1]=new THREE.MeshStandardMaterial({color:'#00f'});
bolamat[2]=new THREE.MeshStandardMaterial({color:'#0f0'});
bolamat[3]=new THREE.MeshStandardMaterial({color:'#0ff'});
bolamat[4]=new THREE.MeshStandardMaterial({color:'#ff0'});
bolamat[5]=new THREE.MeshStandardMaterial({color:'#f0f'});
bolamat[6]=new THREE.MeshStandardMaterial({color:'#fff'});

geo[5]=new THREE.BoxGeometry(100,1,100);
mesh[5]=new THREE.Mesh(geo[5],mat[5]);
mesh[5].position.set(-20,-24.4,0);
scene.add(mesh[5]);

for(let z=1;z<7;z++){
	bolageo[z]=new THREE.SphereGeometry(2);
	bolamesh[z]=new THREE.Mesh(bolageo[z],bolamat[z]);
}
bolamesh[1].position.set(-35,2,-2);
bolamesh[2].position.set(-35,2,22);
bolamesh[3].position.set(-60,8,0);
bolamesh[4].position.set(7,2,-19.5);
bolamesh[5].position.set(-47,2,-19.5);
bolamesh[6].position.set(10,16.7,15);


// ******** first block

shape=new THREE.Shape();
shape2=new THREE.Shape();

shape.moveTo(-9,-6.2);
shape.lineTo(+9,-6.2);
shape.lineTo( 0,+6.2);

shape2.moveTo(-20.8,-6.2);
shape2.lineTo(+20.8,-6.2);
shape2.lineTo(  +12,+6.2);
shape2.lineTo(  -12,+6.2);

geo[1]=new THREE.ShapeGeometry(shape);
mesh[1]=new THREE.Mesh(geo[1],mat[1]) 
mesh[1].position.set(0,-6.2,0);
	axe[1].add(mesh[1]);
	axe[1].rotation.set(p/4.0,0,0);
	axe[1].position.set(0,0,-12);
mesh[2]=mesh[1].clone();
	axe[2].add(mesh[2]);
	axe[2].position.set(0,0,12);
	axe[2].rotation.set(-p/4.0,0,0);

geo[3]=new THREE.ShapeGeometry(shape2);
mesh[3]=new THREE.Mesh(geo[3],mat[2]) 
mesh[3].position.set(0,-6.2,0);
	axe[3].add(mesh[3]);
	axe[3].rotation.set(p/4,0,0);

	gro[3].add(axe[3]);
	gro[3].rotation.set(0,p/2,0);
	gro[4]=gro[3].clone();
	gro[4].rotation.set(0,-p/2,0);

geo[4]=new THREE.BoxGeometry(17.7,15,41.5);
mesh[4]=new THREE.Mesh(geo[4],mat[3]);
mesh[4].position.set(0,-16.3,0);

gro[5].add(axe[1]);gro[5].add(axe[2]);gro[5].add(gro[3]);gro[5].add(gro[4]);gro[5].add(mesh[4]);

gro[5].position.set(-35,0,10);
scene.add(gro[5]);

// ******** second block

// clearing vars and shape2

geo=[];mesh=[];
axe=[];for(let z=1;z<10;z++){axe[z]=new THREE.AxesHelper(0.1);}
gro=[];for(let z=1;z<10;z++){gro[z]=new THREE.Group();}
shape2=new THREE.Shape();

shape2.moveTo(-35.8,-6.2);
shape2.lineTo(+35.8,-6.2);
shape2.lineTo(  +27,+6.2);
shape2.lineTo(  -27,+6.2);

geo[1]=new THREE.ShapeGeometry(shape);
mesh[1]=new THREE.Mesh(geo[1],mat[1]) 
mesh[1].position.set(0,-6.2,0);
	axe[1].add(mesh[1]);
	axe[1].rotation.set(p/4.0,0,0);
	axe[1].position.set(0,0,-27.05);
mesh[2]=mesh[1].clone();
	axe[2].add(mesh[2]);
	axe[2].position.set(0,0,27.05);
	axe[2].rotation.set(-p/4.0,0,0);

geo[3]=new THREE.ShapeGeometry(shape2);
mesh[3]=new THREE.Mesh(geo[3],mat[2]) 
mesh[3].position.set(0,-6.2,0);
	axe[3].add(mesh[3]);
	axe[3].rotation.set(p/4,0,0);

	gro[3].add(axe[3]);
	gro[3].rotation.set(0,p/2,0);
	gro[4]=gro[3].clone();
	gro[4].rotation.set(0,-p/2,0);

geo[4]=new THREE.BoxGeometry(17.7,15,72);
mesh[4]=new THREE.Mesh(geo[4],mat[4]);
mesh[4].position.set(0,-16.2,0);
gro[5].add(axe[1]);gro[5].add(axe[2]);gro[5].add(gro[3]);gro[5].add(gro[4]);gro[5].add(mesh[4]);
gro[5].rotation.set(0,-p/2,0);
gro[5].position.set(-20,0,-19.5)
scene.add(gro[5]);


// ******** third block

// clearing vars and shape2

geo=[];mesh=[];
axe=[];for(let z=1;z<10;z++){axe[z]=new THREE.AxesHelper(0.1);}
gro=[];for(let z=1;z<10;z++){gro[z]=new THREE.Group();}
shape=new THREE.Shape();
shape2=new THREE.Shape();

shape.moveTo(-4.5,-3.1);
shape.lineTo(+4.5,-3.1);
shape.lineTo(   0,+3.1);

shape2.moveTo(-5.9,-3.1);
shape2.lineTo(+5.9,-3.1);
shape2.lineTo(+1.5,+3.1);
shape2.lineTo(-1.5,+3.1);

geo[1]=new THREE.ShapeGeometry(shape);
mesh[1]=new THREE.Mesh(geo[1],mat[1]) 
mesh[1].position.set(0,-3.1,0);
	axe[1].add(mesh[1]);
	axe[1].rotation.set(p/4.0,0,0);
	axe[1].position.set(0,0,-1.5);
mesh[2]=mesh[1].clone();
	axe[2].add(mesh[2]);
	axe[2].position.set(0,0,1.5);
	axe[2].rotation.set(-p/4.0,0,0);


geo[3]=new THREE.ShapeGeometry(shape2);
mesh[3]=new THREE.Mesh(geo[3],mat[2]) 
mesh[3].position.set(0,-3.1,0);
	axe[3].add(mesh[3]);
	axe[3].rotation.set(p/4,0,0);
	gro[3].add(axe[3]);
	gro[3].rotation.set(0,p/2,0);
	gro[4]=gro[3].clone();
	gro[4].rotation.set(0,-p/2,0);

geo[4]=new THREE.BoxGeometry(9,25,11.9);
mesh[4]=new THREE.Mesh(geo[4],mat[4]);
mesh[4].position.set(0,-17,0);
gro[5].add(axe[1]);gro[5].add(axe[2]);gro[5].add(gro[3]);gro[5].add(gro[4]);gro[5].add(mesh[4]);
gro[5].position.set(-60,6,0);
scene.add(gro[5]);






// ******** fifth block

// clearing vars
geo=[];mesh=[];
axe=[];for(let z=1;z<10;z++){axe[z]=new THREE.AxesHelper(0.1);}
gro=[];for(let z=1;z<10;z++){gro[z]=new THREE.Group();}
shape=new THREE.Shape();
shape2=new THREE.Shape();

shape.moveTo(-4.0,-3);
shape.lineTo(+4.0,-3);
shape.lineTo( 0,+3);

shape2.moveTo(-4.0,-3);
shape2.lineTo(+4.0,-3);
shape2.lineTo( 0,+3);

geo[1]=new THREE.ShapeGeometry(shape);
mesh[1]=new THREE.Mesh(geo[1],mat[1]) 
mesh[1].position.set(0,-3,0);
	axe[1].add(mesh[1]);
	axe[1].position.set(20,0,5);
	axe[1].rotation.set(p/4.3,0,0);

mesh[2]=mesh[1].clone();
	axe[2].add(mesh[2]);
	axe[2].position.set(20,0,5);
	axe[2].rotation.set(-p/4.3,0,0);

geo[11]=new THREE.ShapeGeometry(shape2);
mesh[11]=new THREE.Mesh(geo[1],mat[2]);

mesh[3]=mesh[11].clone();
	axe[3].add(mesh[3]);
	axe[3].rotation.set(p/4.3,0,0);
gro[3].add(axe[3]);
gro[3].position.set(22,-2.2,5)
gro[3].rotation.set(0,-p/2,0);

mesh[4]=mesh[11].clone();
	axe[4].add(mesh[4]);
	axe[4].rotation.set(-p/4.3,0,0);
gro[4].add(axe[4]);
gro[4].position.set(18,-2.1,5)
gro[4].rotation.set(0,-p/2,0);

geo[4]=new THREE.BoxGeometry(8,35,8);
mesh[4]=new THREE.Mesh(geo[4],mat[6]);
mesh[4].position.set(20,-22,5);

gro[5].add(axe[1]);gro[5].add(axe[2]);gro[5].add(gro[3]);gro[5].add(gro[4]);gro[5].add(mesh[4]);
gro[5].position.set(-10,15,10);
scene.add(gro[5]);

}

let cola,colb,t=0;

function getRGBColor(){
	const R=Math.floor(Math.random()*256);
	const G=Math.floor(Math.random()*256);
	const B=Math.floor(Math.random()*256);
	cola="rgb("+R+","+G+","+B+")";
	colb="rgb("+(255-R)+","+(255-G)+","+(255-B)+")";
}

function animate(){
	requestAnimationFrame(animate);
	t++;
	if(t==50){
		for(let z=1;z<7;z++){
			getRGBColor();
			bolamesh[z].material.color.set(cola);
			bolamesh[z].material.emissive.set(cola);
			bolamesh[z].material.emissiveIntensity=2.0;
			scene.add(bolamesh[z])
		}
	}
	if(t>50){t=0;}
	renderer.render(scene,camera);
}

init();
animate();

</script>
</body>
</html>

