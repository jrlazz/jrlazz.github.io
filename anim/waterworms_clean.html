<!DOCTYPE html>
<html lang="en">
<head>
<title>waterworms.html</title>
<meta charset="utf-8">
<link rel="shortcut icon" href="https://threejs.org/files/favicon.ico"/>

<style>
span{position:absolute;font-family:Monospace;font-size:9pt;color:#006;z-index:2;cursor:pointer;}
body{height:164px;margin:0px;background-image:url('img/sea.jpg');background-size:100% 100%;background-color:#2680d6;}
.abs{position:absolute;}
button{border-radius:50%;font-family:Arial;font-size:16pt;font-weight:bolder;padding:0px;cursor:pointer;}
a{cursor:pointer;}
</style>

</head>

<body>

<script type="module">

import * as THREE from '../js/three.module_res_res.js';
import { OrbitControls } from '../js/OrbitControls_res_res.js';

var renderer, scene, camera, controls, pointLight, ambientLight, frontLight;

var w=0;
var w1=0;
var w2=0;
var w3=0;
var w4=0;

var ponta=[];
var group=new THREE.Group();
for(let i=0;i<51;i++){group[i]=new THREE.Group();}

var torusG, torusMP, torusMR;
var torus=[];

var pontaG, pontaMB, pontaMP, pontaMR, pontaMY;

var c1r=document.getElementById("c1");
var c2r=document.getElementById("c2");
var c3r=document.getElementById("c3");
var c4r=document.getElementById("c4");

function init(){

	renderer=new THREE.WebGLRenderer({antialias:true,alpha:true});
	renderer.setPixelRatio( window.devicePixelRatio );
	renderer.setClearColor(0x000000,0);
	renderer.setSize(window.innerWidth,window.innerHeight);
	document.body.appendChild(renderer.domElement);

	scene=new THREE.Scene();

	camera=new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight,1,1000);
	camera.position.set(0,0,40);

	controls=new OrbitControls(camera,renderer.domElement);
	controls.minDistance=20;
	controls.maxDistance=60;
	controls.enablePan=true;
	controls.enableZoom=true;
	controls.enableRotate=true;
	controls.enableDamping=true;

	ambientLight=new THREE.AmbientLight("#fff",1);
	scene.add(ambientLight);

	frontLight=new THREE.DirectionalLight('#ff0',1);
	frontLight.position.set(0,0,-80);
	scene.add(frontLight);

	pointLight=new THREE.PointLight('#ff0',1);
	pointLight.position.set(0,0,80 );
	scene.add(pointLight);

	pontaG=new THREE.SphereGeometry(1,16,32);
	pontaMB=new THREE.MeshStandardMaterial({color:0x000000});
	pontaMY=new THREE.MeshStandardMaterial({color:0xffff00,metalness:0.7,roughness:0.2});
	pontaMR=new THREE.MeshStandardMaterial({color:0xff6666,metalness:0.7,roughness:0.2});
	pontaMP=new THREE.MeshStandardMaterial({color:0xff00ff,metalness:0.7,roughness:0.2});

	ponta[30]=new THREE.Mesh(pontaG,pontaMB)
	ponta[30].scale.set(0.2,0.2,0.2);
	ponta[30].position.set(-0.8,-0.4,-0.5);
	ponta[40]=ponta[30].clone();
	ponta[40].position.set(-0.8,-0.4,0.5);
	ponta[50]=ponta[30].clone();
	ponta[50].scale.set(0.2,0.2,0.5);
	ponta[50].position.set(-0.2,-0.9,0);

	ponta[31]=ponta[30].clone();
	ponta[41]=ponta[40].clone();
	ponta[51]=ponta[50].clone();

	ponta[1]=new THREE.Mesh(pontaG,pontaMY)
	ponta[1].position.set(-6,0,0);
	ponta[1].add(ponta[30]);
	ponta[1].add(ponta[40]);
	ponta[1].add(ponta[50]);

	ponta[2]=new THREE.Mesh(pontaG,pontaMR)
	ponta[2].position.set(6,0,0);

	ponta[10]=new THREE.Mesh(pontaG,pontaMY)
	ponta[10].position.set(-6,0,0);
	ponta[10].add(ponta[31]);
	ponta[10].add(ponta[41]);
	ponta[10].add(ponta[51]);

	ponta[20]=new THREE.Mesh(pontaG,pontaMP)
	ponta[20].position.set(6,0,0);

	torusG=new THREE.TorusGeometry(3,1,32,32,Math.PI);
	torusMR=new THREE.MeshStandardMaterial({color:0xff6666,metalness:0.7,roughness:0.2});
	torusMP=new THREE.MeshStandardMaterial({color:0xff00ff,metalness:0.7,roughness:0.2});

	torus[1]=new THREE.Mesh(torusG,torusMR);
	torus[1].scale.set(1,0.7,1);
	torus[1].position.set(-3,0,0);
	torus[1].rotation.set(0,0,0);
		torus[2]=torus[1].clone();
		torus[2].position.set(3,0,0);
		torus[2].rotation.set(0,0,Math.PI);
	torus[3]=torus[1].clone();
	torus[3].position.set(3,0,0);
		torus[4]=torus[2].clone();
		torus[4].position.set(3,0,0);
	torus[5]=torus[1].clone();
	torus[5].position.set(3,0,0);


	torus[10]=new THREE.Mesh(torusG,torusMP);
	torus[10].scale.set(1,0.7,1);
	torus[10].position.set(-3,0,0);
	torus[10].rotation.set(0,0,0);
		torus[20]=torus[10].clone();
		torus[20].position.set(3,0,0);
		torus[20].rotation.set(0,0,Math.PI);
	torus[30]=torus[10].clone();
	torus[30].position.set(3,0,0);
		torus[40]=torus[20].clone();
		torus[40].position.set(3,0,0);
	torus[50]=torus[10].clone();
	torus[50].position.set(3,0,0);
}

function animate(){
	requestAnimationFrame(animate);
	renderer.render(scene,camera);
	controls.update();
	w++;
	scene.rotation.y +=0.01;
	if(w>35){
		group[5].rotation.y +=0.03;
		group[4].rotation.y -=0.03;
		group[3].rotation.y +=0.06;
		group[2].rotation.y -=0.03;
		group[1].rotation.x +=0.01;
		group[1].rotation.z +=0.02;

		group[50].rotation.y +=0.06;
		group[40].rotation.y -=0.05;
		group[30].rotation.y +=0.02;
		group[20].rotation.y -=0.01;
		group[10].rotation.z +=0.03;
	}

	if(w==30){
		group[1].add(ponta[1]);
		group[5].add(ponta[2]);
			group[5].add(torus[5]);group[5].position.set(6,0,0);
			group[4].add(torus[4]);group[4].position.set(6,0,0);group[4].add(group[5]);
			group[3].add(torus[3]);group[3].position.set(6,0,0);group[3].add(group[4]);
			group[2].add(torus[2]);group[2].add(group[3]);
			group[1].add(torus[1]);group[1].add(group[2]);
			scene.add(group[1]);
			group[1].position.set(0,0,-20);
		group[10].add(ponta[10]);
		group[50].add(ponta[20]);
			group[50].add(torus[50]);group[50].position.set(6,0,0);
			group[40].add(torus[40]);group[40].position.set(6,0,0);group[40].add(group[50]);
			group[30].add(torus[30]);group[30].position.set(6,0,0);group[30].add(group[40]);
			group[20].add(torus[20]);group[20].add(group[30]);
			group[10].add(torus[10]);group[10].add(group[20]);
			scene.add(group[10]);
			group[10].scale.set(0.5,0.5,0.5);
			group[10].position.set(-10,5,-2);
	}

	w3++;

	w2=w3/3;

	if(c4r){
		c1r.style.display="";
		c2r.style.display="";
		c3r.style.display="";
		c4r.style.display="";

		c1r.setAttribute('r',w2/1);
		c2r.setAttribute('r',w2/2);
		c3r.setAttribute('r',w2/4);
		c4r.setAttribute('r',w2/8);
	}

	w4++;
	if(w4==30){ponta[50].material.color.set(0xffffff);}
	if(w4==60){ponta[50].material.color.set(0x000000);w4=0;}
}

init();

animate();

</script>

</body>
</html>
