<!DOCTYPE html>
<html lang="en">
<head>
<title>tween_eyes.html</title>
<meta charset="utf-8">
<link rel="shortcut icon" href="ok.ico"/>

<style>
body{margin:0px;background-color:#000;font-family:Monospace;overflow:hidden;}
</style>

<script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>

<script type="importmap">
	{
		"imports":{
			"three":"https://unpkg.com/three@0.160.0/build/three.module.js",
			"three/addons/":"https://unpkg.com/three@0.160.0/examples/jsm/"
		}
	}
</script>

</head>

<body>

<span style="position:absolute;left:10px;top:10px;color:#c84;font-size:20.5px;">Simple Tween scene<span id="mika"></span></span>
<img src="img/eye_1.png" style="position:absolute;left:-250px;"></img>
<img src="img/rgbmapS.png" style="position:absolute;left:-250px;"></img>
<button style="position:absolute;left:84%;top:84%;background-color:#c84;text-align:center;"><a id="code" href="tween_eyes.txt" target="_blank" style="color:#000;text-decoration:none;font-size:20.5pt;">The Code</a></button>

<script type="module">

import * as THREE from "three";
import { OrbitControls } from "three/addons/controls/OrbitControls.js";
import * as TWEEN from "three/addons/libs/tween.module.js";

var scene,camera,renderer,controls,texcap,face,capA,capB,texcapA,texcapB,texeye,cloR,cloL,eyeR,eyeL,amb;
var clock=new THREE.Clock();
var w=0;
var t=0;
var dt=0;
var amb=0;

	scene=new THREE.Scene();
	camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,1,1000);
	camera.position.set(2,0,20);

	renderer=new THREE.WebGLRenderer({antialias:true,alpha:true});
	renderer.setSize(window.innerWidth,window.innerHeight);
	renderer.setClearColor('#000',0);
	renderer.outputColorSpace=THREE.LinearSRGBColorSpace;
	document.body.appendChild(renderer.domElement);

	//controls = new OrbitControls(camera,renderer.domElement);

	face=new THREE.Mesh(new THREE.SphereGeometry(6,32,32).translate(0,3,0),new THREE.MeshLambertMaterial({color:'#ca7'}));
	face.position.set(0,0,-5);
	scene.add(face);

	texcapA=new THREE.TextureLoader().load("img/rgbmaps.png");
	texcapA.wrapS=THREE.RepeatWrapping;texcapA.wrapT=THREE.RepeatWrapping;
	texcapA.colorSpace=THREE.SRGBColorSpace;
	texcapA.repeat.set(8,1);
	texcapB=texcapA.clone();
	texcapB.repeat.set(2,1);
	capA=new THREE.Mesh(new THREE.SphereGeometry(6,32,32).translate(0, 3, 0),new THREE.MeshLambertMaterial({color:'#ccc',map:texcapA}));
	capA.position.set(0,0.2,-5);
	scene.add(capA);
	capB=new THREE.Mesh(new THREE.CircleGeometry(5,32,32).translate(0, 3, 0),new THREE.MeshLambertMaterial({color:'#fff',map:texcapB,side:THREE.DoubleSide}));
	capB.position.set(0,3.1,3);
	capB.rotation.set(-(Math.PI/2),0,0);
	scene.add(capB);
	
	cloR=new THREE.Mesh(new THREE.SphereGeometry(1.1,32,32,0,Math.PI*2,0,Math.PI/1.7).translate(0,0,0),new THREE.MeshStandardMaterial({color:'#000'}));
	cloR.position.set(-1.5,0,0);
	cloR.rotation.set(-Math.PI/5,0,0);
	scene.add(cloR);
	cloL=cloR.clone();
	cloL.position.set(1.5,0,0);
	cloL.rotation.set(-Math.PI/5,0,0);
	scene.add(cloL);

	texeye=new THREE.TextureLoader().load("img/eye_1.png");
	texeye.colorSpace=THREE.SRGBColorSpace;
	eyeR=new THREE.Mesh(new THREE.SphereGeometry(1,32,32).translate(0,0,0),new THREE.MeshBasicMaterial({color:'#fdb',map:texeye}));
	eyeR.position.set(-1.5,0,0);
	eyeR.rotation.set(0,-(Math.PI/1.5),0);
	scene.add(eyeR);
	eyeL=eyeR.clone();
	eyeL.position.set(1.5,0,0);
	eyeL.rotation.set(0,-(Math.PI/1.5),0);
	scene.add(eyeL);

	amb=new THREE.AmbientLight('#fff',4);

// Tweening ... references:
//https://sbcode.net/threejs/tween/
//https://henryegloff.com/how-to-use-tween-js-with-three-js/

//.easing options...
//.easing(TWEEN.Easing.Linear.None)
//.easing(TWEEN.Easing.Quadratic.InOut)
//.easing(TWEEN.Easing.Cubic.InOut)
//.easing(TWEEN.Easing.Quartic.InOut)
//.easing(TWEEN.Easing.Quintic.InOut)
//.easing(TWEEN.Easing.Sinusoidal.InOut)
//.easing(TWEEN.Easing.Exponential.InOut)
//.easing(TWEEN.Easing.Circular.InOut)
//.easing(TWEEN.Easing.Elastic.InOut)
//.easing(TWEEN.Easing.Back.InOut)
//.easing(TWEEN.Easing.Bounce.InOut)

function tEyes(){
	new TWEEN.Tween(eyeR.rotation)
		.to({y:"+"+(Math.PI/2)},1000)
		.yoyo(true).repeat(1).easing(TWEEN.Easing.Sinusoidal.InOut).start();
	new TWEEN.Tween(eyeL.rotation)
		.to({y:"+"+(Math.PI/2)},1000)
		.yoyo(true).repeat(1).easing(TWEEN.Easing.Sinusoidal.InOut).start();
}

function tClos(){
	new TWEEN.Tween(cloR.rotation)
		.to({x:"+"+(Math.PI-Math.PI/5)},500)
		.yoyo(true).repeat(1).easing(TWEEN.Easing.Sinusoidal.InOut).start();
	new TWEEN.Tween(cloL.rotation)
		.to({x:"+"+(Math.PI-Math.PI/5)},500)
		.yoyo(true).repeat(1).easing(TWEEN.Easing.Sinusoidal.InOut).start();
}

renderer.setAnimationLoop(() => {
  	dt=clock.getDelta();
  	t += dt;
	w += dt;

	if(parseInt(w)==11){scene.add(amb);cloR.material.color.set('#ca7');}

	if(parseInt(t)==2){tClos();}
	if(parseInt(t)==4){tEyes();}

	if(parseInt(t)==6){tClos();}
	if(parseInt(t)==8){tEyes();}

	if(parseInt(t)==10){t=0;}
	
	//document.getElementById("mika").innerText=parseInt(t)+" s";

	//controls.update();

	TWEEN.update();
	renderer.render(scene,camera);
})

/*

A simple example of a scene with TWEEN

I hope that new Coders, interested in Three.js, can get to know Tween and use it in a simple way, on their first pages.

The link:

https://jrlazz.eu5.org/anim/tween_eyes.html

Thanks to the THREE.js Team !

*/


</script>

</body>

</html>
