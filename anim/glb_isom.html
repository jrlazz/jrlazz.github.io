<!DOCTYPE html>
<html lang="en">
<head>
<title>glb_isom.html</title>
<meta charset="utf-8">
<link rel="shortcut icon" href="https://threejs.org/files/favicon.ico"/>

<style>
body{margin:0px;border:0px;background-color:#442266;font-family:Monospace;overflow:hidden;}
span{position:absolute;color:#ff0;font-size:9pt;}
</style>

</head>

<body>

<span id="spanA" style="left:100px;top:5px;">right click &rarr; inspect &rarr; source code</span>

<script type="module">

import * as THREE from '../js/three.module_res_res.js';
import Stats from '../js/stats.module_res_res.js';
import { OrbitControls } from '../js/OrbitControls_res_res.js';
import { GLTFLoader } from '../js/GLTFLoader_res_res.js';

var stats, controls, loader;
var camera, scene, renderer, GGK, texGGK, matGGK, geoGGK, model, amb, starB, qua;
var tex=[];
function init(){

	camera = new THREE.PerspectiveCamera(50,window.innerWidth/window.innerHeight,0.1,1000);
	camera.position.set(0,20,30);

	scene=new THREE.Scene();

	amb=new THREE.AmbientLight(0xcccccc,0.5);
	scene.add(amb);

	starB=new THREE.PointLight("#fff",1.5);starB.castShadow=true;starB.shadow.mapSize.width=2048;starB.shadow.mapSize.height=2048;scene.add(starB);
	starB.position.set(-120,100,10);

	renderer=new THREE.WebGLRenderer({antialias:false});
	renderer.setPixelRatio(window.devicePixelRatio);
	renderer.setSize(window.innerWidth,window.innerHeight);
	document.body.appendChild(renderer.domElement);
	renderer.setClearColor(0x442266);
	renderer.shadowMap.enabled=true;

	controls=new OrbitControls(camera,renderer.domElement);


	texGGK=new THREE.TextureLoader().load('models/extras/bojomad2.jpg');
	texGGK.wrapS=THREE.RepeatWrapping;texGGK.wrapT=THREE.RepeatWrapping;
	texGGK.repeat.set(1,2);
	matGGK=new THREE.MeshStandardMaterial({map:texGGK,color:('#fff')});
	geoGGK=new THREE.BoxGeometry(35,35,0.5);
	GGK=new THREE.Mesh(geoGGK,matGGK);
	GGK.rotation.set(1.57,0,1.57);
	GGK.position.set(0,0,0);
	GGK.receiveShadow=true;
	scene.add(GGK);

	tex[2]=new THREE.TextureLoader().load('img/ame_neve.jpg');
	//tex[2].wrapS=THREE.RepeatWrapping;tex[2].wrapT=THREE.RepeatWrapping;
	//tex[2].repeat.set(1,1);

	var geo2=new THREE.BoxGeometry(6.5,3.25,0.05);
	var mat2=new THREE.MeshStandardMaterial({map:tex[2],color:'#fff'});
	var qua=new THREE.Mesh(geo2,mat2);
//	qua.position.set(0,3.5,-4.8);
//	qua.rotation.set(0,0,0);
//	qua.castShadow=true;


	loader=new GLTFLoader();
	loader.load('models/extras/isom.glb',function(gltf){
	model=gltf.scene;
	model.traverse(function(child){
    		if (child.isMesh){
        		child.castShadow=true;
			//child.receiveShadow=true;
		}
	})
	model.position.set(0,0.5,0);
	model.scale.set(3,3,3);
	qua.position.set(0,0.97,-1.7);
	qua.scale.set(0.33,0.33,0.33);
	model.add(qua);
	scene.add(model);
	});



	stats = new Stats();
	document.body.appendChild( stats.dom );

	window.addEventListener( 'resize', onWindowResize );
}

function onWindowResize() {
	camera.aspect = window.innerWidth / window.innerHeight;
	camera.updateProjectionMatrix();
	renderer.setSize( window.innerWidth, window.innerHeight );
}

function animate(){
	requestAnimationFrame(animate);
	render();
	stats.update();
	controls.update();
}

function render(){
	if(model){model.rotation.y -=0.02;}
	renderer.render(scene,camera);
}


init();
animate();

</script>

</body>
</html>
