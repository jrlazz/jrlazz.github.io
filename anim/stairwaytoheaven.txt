<!DOCTYPE html>
<head>
<title>stairwaytoheaven.html</title>
<meta charset="utf-8">
<link rel="shortcut icon" href="ok.ico"/>
<style>
@font-face{font-family:tipo;src:url('../fonte/MysteryQuest-Regular.ttf');}
body{margin:0px;background-color:#048;font-family:tipo;overflow:hidden;background-image:linear-gradient(#09f,#016);}
a{font-size:12pt;color:#0c0;text-decoration:none;}
</style>

<script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>

<script type="importmap">
	{
		"imports":{
			"three":"https://unpkg.com/three@0.160.0/build/three.module.js",
			"three/addons/":"https://unpkg.com/three@0.160.0/examples/jsm/"
		}
	}
</script>

<script>
function inicia(){
	audio.play();
	document.getElementById("sim").value=1;
	document.getElementById("paraclick").innerText="";
}
</script>

</head>

<body onclick="inicia();">

<div style="position:absolute;font-size:20.1px;top:5px;width:99%;text-align:center;color:#fc0;">
<span style="color:#016;font-size:20.5pt;">Stairway to Heaven</span>
</select>
</div>
<button id="paracode" style="position:absolute;left:84%;top:84%;background-color:transparent;border-color:#09f;text-align:center;display:none;"><a id="code" href="stairwaytoheaven.txt" target="_blank" style="color:#09f;text-decoration:none;font-size:20.5px;">The Code</a></button>
<span style="position:absolute;left:2%;top:84%;width:300px;color:#09f;font-size:12pt;font-style:italic;text-align:center;">Led Zeppelin
<br>
<audio id="audio" controls style="opacity:0.3;"><source src="mp3/lz_stoheaven.mp3" type="audio/mpeg"></audio> 
</span>
<input id="sim" type="number" value=0 autocomplete="off" style="display:none;"></input>
<div id="fundo" style="position:absolute;left:0px;top:0px;width:100%;height:100%;text-align:center;background-image:linear-gradient(#09f,#016);opacity:1.0;">
<span id="paraclick" style="position:relative;top:30px;font-size:20.5pt;color:#016;cursor:pointer;">... click
</span>
</div>

<script type="module">

import * as THREE from "three";
import { OrbitControls } from "three/addons/controls/OrbitControls.js";

var camera,scene,renderer,controls,light,shape;
var p=Math.PI;
var extrudeSettings0=[];
var extrudeSettings1=[];
var geo=[];var mat=[];var mesh=[];
var gA=new THREE.Group();var gB=new THREE.Group();
var w=0;
function init() {

	renderer=new THREE.WebGLRenderer({antialias:true,alpha:true});
	renderer.setSize(window.innerWidth,window.innerHeight);
	renderer.setClearColor('#068',0);
	renderer.outputColorSpace=THREE.LinearSRGBColorSpace;
	document.body.appendChild(renderer.domElement);
	window.addEventListener('resize',onResize,false);

	scene=new THREE.Scene();
	camera=new THREE.PerspectiveCamera(40,innerWidth/innerHeight,1,1000);
	camera.position.set(0,0,340);

	//controls=new OrbitControls(camera,renderer.domElement);

	light=new THREE.PointLight('#ccc',24000);
	light.position.set(50,10,5);
	//scene.add(light);

	var light2=new THREE.PointLight('#ccc',24000);
	light2.position.set(-20,-90,40);
	scene.add(light2);
	
	scene.add(new THREE.AmbientLight('#ccc',5));

	shape=new THREE.Shape();
	shape.moveTo(0,0);
	shape.lineTo(2,0);
	shape.lineTo(4,24);
	shape.lineTo(-2,24);
	shape.lineTo(0,0);

	extrudeSettings0={steps:2,depth:2,bevelEnabled:false,bevelThickness:1,bevelSize:1,bevelOffset:0,bevelSegments:1}
	geo[0]=new THREE.ExtrudeGeometry(shape,extrudeSettings0);
	mat[0]=new THREE.MeshStandardMaterial({color:'#069',wireframe:false});
	mesh[0]=new THREE.Mesh(geo[0],mat[0]) ;
	for(let z=1;z<100;z++){mesh[z]=mesh[0].clone();mesh[z].position.set(z*2,0,0);mesh[z].rotation.set(z/3,p/2,p/2);mesh[z].scale.setScalar(2-z/50);gA.add(mesh[z]);}
	gA.position.set(0,-100,0);
	gA.rotation.set(0,0,p/2);
	scene.add(gA);

	geo[2]=new THREE.CylinderGeometry(0.2,2,200);
	mat[2]=new THREE.MeshStandardMaterial({color:'#069',wireframe:false});
	mesh[2]=new THREE.Mesh(geo[2],mat[2]);
	mesh[2].position.set(0,1,0);
	scene.add(mesh[2]);

}

function animate(){
	requestAnimationFrame(animate);
	if(document.getElementById("sim").value==1){
		w++;if(w<399){document.getElementById("fundo").style.opacity=1-w/400;}
		if(w==400){
			document.getElementById("sim").value=0;
			document.getElementById("fundo").style.display="none";
			document.getElementById("paracode").style.display="";
		}
	}
	renderer.render(scene,camera);
}

function onResize(){
	camera.aspect=window.innerWidth/window.innerHeight;
	camera.updateProjectionMatrix();
	renderer.setSize(window.innerWidth,window.innerHeight);
}

init();
animate();

</script>
</body>
</html>


