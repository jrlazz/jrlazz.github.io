<!DOCTYPE html>
<html lang="en">
<head>
<title>fbx_2.html</title>
<meta charset="utf-8">
<link rel="shortcut icon" href="https://threejs.org/files/favicon.ico"/>


<style>
body{margin:0px;border:0px;background-color:#002244;font-family:Monospace;overflow:hidden;}
span{position:absolute;color:#ff0;font-size:12pt;cursor:pointer;}
</style>

</head>

<body>

<span id="spanA" style="left:10px;top:5px;">right click &rarr; inspect &rarr; source code</span>

<script type="module">
import * as THREE from '../js/three.module_res_res.js';
//import Stats from '../js/stats.module_res_res.js';
import { OrbitControls } from '../js/OrbitControls_res_res.js';
//import { ColladaLoader } from '../js/ColladaLoader_res_res.js';
//import { GLTFLoader } from '../js/GLTFLoader_res_res.js';
import { FBXLoader } from '../js/FBXLoader_res_res.js';

var camera, scene, renderer, stats, controls, mesh, ambientLight, star;
var w=0;

function init(){

	camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1000);
	camera.position.set(100,100,300);

	scene=new THREE.Scene();
	scene.background=new THREE.Color(0x112244);

	renderer=new THREE.WebGLRenderer({antialias:false});
	renderer.setPixelRatio(window.devicePixelRatio);
	renderer.setSize(window.innerWidth,window.innerHeight);
	renderer.shadowMap.enabled=true;
	document.body.appendChild(renderer.domElement);

	controls=new OrbitControls(camera,renderer.domElement);
	controls.update();

	window.addEventListener('resize',onWindowResize);

	var tex=new THREE.TextureLoader().load('models/extras/blender_cor_03.jpg');
	tex.wrapS=THREE.RepeatWrapping;tex.wrapT=THREE.RepeatWrapping;
	tex.repeat.set(4,4);
	mesh=new THREE.Mesh(new THREE.PlaneGeometry(300,300),new THREE.MeshPhongMaterial({map:tex,side:THREE.DoubleSide}));
	mesh.rotation.x=-Math.PI/2;
	mesh.receiveShadow=true;

	const loader = new FBXLoader();
	loader.load('models/extras/salatex.fbx',function(object){
		object.traverse(function(child){
			if (child.isMesh){
				child.castShadow=true;
				child.receiveShadow=true;
			}
		});
		object.position.set(30,20,0);
		object.scale.set(10,10,10);
		scene.add(object);
	} );

	ambientLight=new THREE.AmbientLight(0xffcc99,0.7);
	scene.add(ambientLight);

	star=new THREE.PointLight("#fff",1.5);
	star.position.set(-150,150,-150);
	star.castShadow=true;
	star.shadow.mapSize.width=1024;
	star.shadow.mapSize.height=1024;
	scene.add(star);

}
function onWindowResize() {
	camera.aspect=window.innerWidth/window.innerHeight;
	camera.updateProjectionMatrix();
	renderer.setSize(window.innerWidth,window.innerHeight);
}

function animate() {
	requestAnimationFrame( animate );
	renderer.render( scene, camera );
	controls.update();
w++;
if(w==5){scene.add(mesh);}
}


init();

animate();

</script>

</body>
</html>
